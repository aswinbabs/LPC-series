/******************************************************************************/
/* FLASH.INI: Flash Initialization File                                       */
/******************************************************************************/
// <<< Use Configuration Wizard in Context Menu >>>                           // 
/******************************************************************************/
/* This file is part of the uVision/ARM development tools.                    */
/* Copyright (c) 2005-2006 Keil Software. All rights reserved.                */
/* This software may only be used under the terms of a valid, current,        */
/* end user licence from KEIL for a compatible version of KEIL software       */
/* development tools. Nothing else gives you the right to use this software.  */
/******************************************************************************/


FUNC void Setup (void) {

// <h> Clock Setup
//   <o1.0..3>   System Clock Prescaler 
//               <1-31>
//               <i> System Clock = (7 * XTAL) / (2 * SysClkPrescaler)
// </h>
  _WDWORD(0xFFFE2018, 0x00000001);   // SYSPRESCALER

// <h> Static Memory Controller (SMC)
// <i> External Bus Interface (EBI)
//   <h> Bank Configuration 0 (BCR0)
//     <o1.0..3>   IDCY: Idle Cycles <0-15>
//     <o1.5..9>   WST1: Wait States 1 <0-31>
//     <o1.11..15> WST2: Wait States 2 <0-31>
//     <o1.10>     RBLE: Read Byte Lane Enable
//     <o1.26>     WP: Write Protect
//     <o1.27>     BM: Burst ROM
//     <o1.28..29> MW: Memory Width  <0=>  8-bit  <1=> 16-bit
//                                   <2=> 32-bit  <3=> Reserved
//   </h>
  _WDWORD(0xFFFF1000, 0x10002D03);   // BCR0: Flash Bus Configuration
// </h>

  _WDWORD(0xFFFE5000, 0x00007FFF);   // EBI_MUX: Enable A16..A23, D8..15,
                                     //          nCE1..3, nBLE0..1, nWAIT
  _WDWORD(0xFFFE5014, 0x0000AAAA);   // PA_RES_MUX: PA0..7 without Resistors
  _WDWORD(0xFFFE5018, 0x000006AA);   // PB_RES_MUX: PB0..4 without Resistors
  _WDWORD(0xFFFE501C, 0x0000AAAA);   // PC_RES_MUX: PC0..7 without Resistors

  _WBYTE (0x4C400000, 0x01);         // I/O Controller: Enable Flash Programming
}

Setup();                             // Setup for Flash
